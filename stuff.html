<!DOCTYPE html>
<html>
<head>
  <title>GitHub Message Board</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: auto; padding: 20px; }
    textarea { width: 100%; height: 100px; }
    input, button { width: 100%; padding: 10px; margin-top: 10px; }
    .message { border-bottom: 1px solid #ccc; padding: 10px; }
  </style>
</head>
<body>
  <h2>Post a Message</h2>
  <input id="name" placeholder="Your Name">
  <textarea id="content" placeholder="Your Message"></textarea>
  <button onclick="postMessage()">Post</button>

  <h3>Messages</h3>
  <div id="messages">Loading...</div>

  <script>
    const repo = "Or300/message-board";
    const token = "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"; // WARNING: don't expose this in public websites
    const api = "https://api.github.com/repos/" + repo + "/issues";

    async function fetchMessages() {
      const res = await fetch(api);
      const data = await res.json();
      const msgDiv = document.getElementById("messages");
      msgDiv.innerHTML = "";

      data.forEach(issue => {
        msgDiv.innerHTML += `
          <div class="message">
            <strong>${issue.title}</strong>
            <p>${issue.body}</p>
          </div>
        `;
      });
    }

    async function postMessage() {
      const name = document.getElementById("name").value;
      const msg = document.getElementById("content").value;

      await fetch(api, {
        method: "POST",
        headers: {
          "Authorization": "token " + token,
          "Accept": "application/vnd.github.v3+json"
        },
        body: JSON.stringify({
          title: name || "Anonymous",
          body: msg
        })
      });

      document.getElementById("content").value = "";
      fetchMessages();
    }

    fetchMessages();
  </script>
</body>
</html>
